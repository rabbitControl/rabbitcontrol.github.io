(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(162)},119:function(e,t,a){},121:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),o=a.n(i),s=(a(113),a(115),a(117),a(119),a(11)),l=a(12),c=a(15),u=a(13),p=a(14),m=(a(121),a(39)),d=a(8),h=function(e){return function(t){var a,r;return r=a=function(a){function r(t){var a;return Object(s.a)(this,r),(a=Object(c.a)(this,Object(u.a)(r).call(this,t))).ignoreReadonly=e?e.ignoreReadonly:void 0,a.handleValue=function(e){var t=a.state.parameter;t instanceof d.ValueParameter?(t.value=e,a.props.onSubmitCb()):t instanceof d.BangParameter&&(t.doBang(),a.props.onSubmitCb()),a.setState({value:e})},a.handleParameterValueChange=function(e){e instanceof d.ValueParameter&&(J.VERBOSE_LOG&&console.log("setting widget value (".concat(e.userid,"): ").concat(e.value)),a.setState({value:e.value}))},a.handleParameterChange=function(e){a.setState({label:e.label,description:e.description,readonly:e.readonly})},a.state={label:a.props.label,value:null,parameter:void 0},a}return Object(p.a)(r,a),Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.registerElement(this)}},{key:"componentWillUnmount",value:function(){var e=this.state.parameter;e&&this.unregisterParameterHandlers(e),this.props.unregisterElement(this)}},{key:"setParameter",value:function(e){e.userid===this.props.userid?(J.VERBOSE_LOG&&console.log("set parameter for widget (".concat(this.props.userid,")")),this.registerParameterHandlers(e),this.setState({parameter:e,label:e.label,readonly:e.readonly})):console.error("userid mismatch! parameter: ".concat(e.userid," - widget: ").concat(this.props.userid))}},{key:"removeParameter",value:function(e){this.unregisterParameterHandlers(e),this.setState({parameter:void 0})}},{key:"getUserid",value:function(){return this.props.userid}},{key:"render",value:function(){var e=this.state.parameter,a=this.state.readonly;return n.createElement(t,Object.assign({},this.props,this.state,{handleValue:this.handleValue,disabled:!e||!!a&&!(!0===this.ignoreReadonly)}))}},{key:"registerParameterHandlers",value:function(e){e instanceof d.ValueParameter&&(e.addValueChangeListener(this.handleParameterValueChange),this.setState({value:e.value})),e.addChangeListener(this.handleParameterChange)}},{key:"unregisterParameterHandlers",value:function(e){e instanceof d.ValueParameter&&e.removeValueChangedListener(this.handleParameterValueChange),e.removeChangedListener(this.handleParameterChange)}}]),r}(n.Component),a.displayName="ParameterComponentWrapper(".concat(t.displayName||t.name,")"),r}},v=a(171),b=a(105),f=a.n(b),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.handleValue&&a.props.handleValue(e),a.props.continuous&&a.handleRelease(e)},a.handleRelease=function(e){a.props.onSubmitCb&&a.props.onSubmitCb()},a.renderLabel=function(e){var t,r=a.props.parameter,i=e.toFixed(2);return r&&(t=r.typeDefinition.unit),n.createElement("div",{style:{whiteSpace:"nowrap"}},t?"".concat(i," ").concat(t):i)},a.state={dimensions:{width:-1,height:-1}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a,r,i=this,o=this.props.value,s=1,l=this.props.parameter;if(l){r=l.readonly;var c=l.typeDefinition;if(void 0!==c&&void 0!==c.minimum&&void 0!==c.maximum){t=c.minimum,a=c.maximum;var u=c.maximum-c.minimum;e=l.typeDefinition.datatype===d.RcpTypes.Datatype.FLOAT32||l.typeDefinition.datatype===d.RcpTypes.Datatype.FLOAT64,c.multipleof?s=c.multipleof:e&&(s=u>0&&this.state.dimensions.width>0?u/this.state.dimensions.width:1)}}return n.createElement(f.a,{onResize:function(e){i.setState({dimensions:e.entry})}},function(l){var c=l.measureRef;return n.createElement("div",{ref:c},n.createElement(v.a,Object.assign({},i.props,{value:o||0,min:t,max:a,stepSize:s,labelPrecision:e?2:0,labelStepSize:a,onChange:i.handleChange,onRelease:i.handleRelease,labelRenderer:i.renderLabel,disabled:!0===r})))})}}]),t}(n.Component),O=(h()(g),a(169)),C=a(172),y=a(99),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){a.props.handleValue&&a.props.handleValue(e),a.props.onSubmitCb&&a.props.onSubmitCb()},a.state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a,r,i=this.props.value,o=1,s=this.props.parameter;if(s){r=s.readonly,e=s.typeDefinition.datatype===d.RcpTypes.Datatype.FLOAT32||s.typeDefinition.datatype===d.RcpTypes.Datatype.FLOAT64;var l=s.typeDefinition;if(void 0!==l&&void 0!==l.minimum&&void 0!==l.maximum){t=l.minimum,a=l.maximum;l.maximum,l.minimum;l.multipleof&&(o=l.multipleof)}}return n.createElement(C.a,Object.assign({},this.props,{value:i||0,min:t,max:a,stepSize:o,minorStepSize:e?.1:1,onValueChange:this.handleChange,disabled:!0===r,selectAllOnFocus:!0,buttonPosition:y.a.RIGHT,placeholder:"-"}))}}]),t}(n.Component),S=(h()(E),a(100)),j={whiteSpace:"nowrap",color:S.a.GRAY1,fontSize:16},V="Connecting to unsecure websocket from secure context. You may need to adjust your browser settings.",P=a(154),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.handleValue&&a.props.handleValue(e.target.value)},a.handleSubmit=function(e){e&&e.preventDefault&&e.preventDefault(),a.props.parameter instanceof d.ValueParameter&&(a.props.parameter.setStringValue(a.props.value)?a.props.onSubmitCb&&a.props.onSubmitCb():console.error("could not set stringvalue..."))},a.state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.value,a=this.props.parameter;return a&&(e=a.readonly),n.createElement("form",{onSubmit:this.handleSubmit},n.createElement(P.a,Object.assign({},this.props,{value:t,onChange:this.handleChange,disabled:!0===e})))}}]),t}(n.Component),w=(h()(k),a(164)),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.handleValue&&a.props.handleValue(e.target.checked),a.props.onSubmitCb&&a.props.onSubmitCb()},a.state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.value,a=this.props.parameter;return a&&(e=a.readonly),n.createElement(w.a,Object.assign({},this.props,{checked:t||!1,onChange:this.handleChange,disabled:!0===e,alignIndicator:y.a.LEFT,large:!0}))}}]),t}(n.Component),D=(h()(T),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.handleValue&&a.props.handleValue(e.target.value),a.props.onSubmitCb&&a.props.onSubmitCb()},a.handleSubmit=function(e){e&&e.preventDefault&&e.preventDefault(),a.props.parameter instanceof d.ValueParameter&&(a.props.parameter.setStringValue(a.props.value)?a.props.onSubmitCb&&a.props.onSubmitCb():console.error("could not set stringvalue..."))},a.state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.value,a=this.props.parameter;return a&&(e=a.readonly),n.createElement(P.a,Object.assign({},this.props,{value:t,type:"color",onChange:this.handleChange,disabled:!0===e}))}}]),t}(n.Component)),R=(h()(D),a(165)),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.handleValue&&a.props.handleValue(e.target.value),a.props.onSubmitCb&&a.props.onSubmitCb()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a=this.props.value,r=this.props.parameter;return r&&(e=r.readonly),r instanceof d.EnumParameter&&(t=r.enumDefinition.entries),console.log("selected:"+a),console.log("entries:"+t),n.createElement(R.a,Object.assign({},this.props,{onChange:this.handleChange,disabled:!0===e,className:"test"}),this.renderOptions(a,t))}},{key:"renderOptions",value:function(e,t){if(t)return t.map(function(t){return n.createElement("option",Object.assign({},t===e?"selected":null,{key:t,value:t}),t)})}}]),t}(n.Component),B=(h()(x),a(66)),L=a(170),A=a(48),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){var t=a.props.parameter,n=!1;t&&t.widget&&(n=!!t.widget.needsConfirmation),n?a.handleDialogOpen():a.doSendBang()},a.handleDialogOpen=function(){return a.setState({isOpen:!0})},a.handleDialogConfirm=function(){a.setState({isOpen:!1}),a.doSendBang()},a.handleDialogCancel=function(){return a.setState({isOpen:!1})},a.state={isOpen:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.labelDisabled,t=this.props.label;return this.props.parameter&&(t=this.props.parameter.label),n.createElement("section",null,n.createElement(B.a,Object.assign({style:{whiteSpace:"nowrap"}},this.props,{text:e?"":t,onClick:this.handleClick})),n.createElement(L.a,{className:"bp3-dark ".concat(this.props.className),canEscapeKeyCancel:!0,cancelButtonText:"Cancel",confirmButtonText:"Send",icon:"warning-sign",intent:A.a.DANGER,isOpen:this.state.isOpen,onCancel:this.handleDialogCancel,onConfirm:this.handleDialogConfirm},n.createElement("p",null,this.props.confirmationText?this.props.confirmationText:"text ".concat(t,"?"),n.createElement("br",null),this.props.parameter&&this.props.parameter.description?"(".concat(this.props.parameter.description,")"):"")))}},{key:"doSendBang",value:function(){this.props.handleValue&&this.props.handleValue(null)}}]),t}(n.Component),N=(h()(I),a(166)),W=a(37),G=a(167),F=a(168),H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleButtonClick=function(){a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="no label",t=this.props.parameter;return t&&void 0!==t.label&&(e=t.label),n.createElement("div",{style:this.props.style},n.createElement(N.a,{vertical:!1},n.createElement(W.a,{icon:this.state.isOpen?"remove":"add",onClick:this.handleButtonClick}),n.createElement("div",{style:{marginLeft:10}}),n.createElement(G.a,null,e)),n.createElement(F.a,{isOpen:this.state.isOpen},this.props.children))}}]),t}(n.Component);H.COMPONENT_DEFAULT_COLOR=S.a.GRAY1;h({ignoreReadonly:!0})(H);var U=function(e){function t(e){var a,n;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getWidth=function(){return 1},a.handleValueChange=function(e){a.props.parameter instanceof d.ValueParameter&&(a.props.parameter.value=e),a.setState({value:e})},a.handleValueSubmit=function(e){console.log("submit"),e&&e.preventDefault&&e.preventDefault(),a.props.parameter instanceof d.ValueParameter&&(a.props.parameter.setStringValue(a.state.value)?a.props.onSubmitCb():(console.error("could not set stringvalue..."),a.setState({value:a.props.parameter.value})))},a.handleButtonClick=function(){a.props.parameter.setDirty(),a.props.onSubmitCb()},a.props.parameter instanceof d.ValueParameter&&null!=a.props.parameter.value&&(n=a.props.parameter.value),a.state={enabled:!0,label:a.props.parameter.label,description:a.props.parameter.description,value:n,dimensions:{width:-1,height:-1}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.parameter;t instanceof d.ValueParameter&&t.addValueChangeListener(function(t){t instanceof d.ValueParameter&&e.setState({value:t.value})}),t.addChangeListener(function(t){e.setState({label:t.label,description:t.description})})}},{key:"createChildWidget",value:function(e){return n.createElement(t,{key:e.id,parameter:e,onSubmitCb:this.props.onSubmitCb})}},{key:"renderChildren",value:function(e){var t=this;if(e instanceof d.GroupParameter)return e.children.map(function(e){return t.createChildWidget(e)})}},{key:"renderValue",value:function(e){if(e.widget instanceof d.SliderWidget&&console.log("SLIDER WIDGET"),e instanceof d.ValueParameter){if(e instanceof d.NumberParameter){var t=e.typeDefinition;return void 0!==t&&void 0!==t.minimum&&void 0!==t.maximum?n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement(g,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange,continuous:!0}))):n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement(E,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange})))}if(e instanceof d.Vector3F32Parameter)return n.createElement("div",null,"vector");if(e instanceof d.BooleanParameter)return n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement("br",null),n.createElement(T,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange})));if(e instanceof d.RGBAParameter||e instanceof d.RGBParameter)return n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement("br",null),n.createElement(D,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange})));if(e instanceof d.EnumParameter)return n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement("br",null),n.createElement(x,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange})));if(e instanceof d.ImageParameter){var a=new Blob([e.value]),r=window.URL.createObjectURL(a);return n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement("br",null),n.createElement("img",{src:r,alt:"IMAGE",height:200}))}return n.createElement("div",null,n.createElement("div",{style:j},e.label),n.createElement("br",null),n.createElement(k,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange})))}return e instanceof d.GroupParameter?n.createElement(H,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleValueChange}),this.renderChildren(e)):e instanceof d.BangParameter?n.createElement(I,Object.assign({},this.props,{value:this.state.value,handleValue:this.handleButtonClick})):void 0}},{key:"render",value:function(){var e=this.props.parameter;return e?n.createElement("div",{style:{marginTop:20,marginBottom:0}},n.createElement(O.a,{interactive:!1},this.renderValue(e))):(console.error("no parameter"),n.createElement("div",null,"no parameter"))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).myParameters=[],a.updateClient=function(){a.state.client&&a.state.client.update()},a.setHost=function(e){a.setState({host:e.currentTarget.value||"localhost"})},a.setPort=function(e){a.setState({port:parseInt(e.currentTarget.value,10)})},a.handleAlertConfirm=function(){a.doConnect()},a.doDisconnect=function(){console.log("DO DISCONNECT");var e=a.state.client;e&&(e.connected=void 0,e.disconnected=void 0,e.onError=void 0,e.parameterAdded=void 0,e.parameterRemoved=void 0,e.dispose()),a.resetUI()},a.doConnect=function(){d.Client.VERBOSE=!0;var e=new d.Client(new d.WebSocketClientTransporter),t=Object(m.a)(Object(m.a)(a)),n=t.connected,r=t.disconnected,i=t.parameterAdded,o=t.parameterRemoved,s=t.onError;Object.assign(e,{connected:n,disconnected:r,parameterAdded:i,parameterRemoved:o,onError:s});var l=a.state.host,c=a.state.port;e.connect(l,c),a.setState({client:e,error:void 0})},a.connected=function(){a.setState({isConnected:!0}),console.log("ConnectionDialog connected!")},a.disconnected=function(e){console.log("ConnectionDialog disconneted: "+JSON.stringify(e)),a.setState({error:"disconneted: "+JSON.stringify(e)}),a.resetUI()},a.onError=function(){console.log("error on socket!"),a.setState({error:"error on socket!"}),a.resetUI()},a.parameterAdded=function(e){if(!e.parent){var t=a.myParameters.slice();t.push(e),a.myParameters=t}void 0!==a.addTimer&&(window.clearTimeout(a.addTimer),a.addTimer=void 0),a.addTimer=window.setTimeout(function(){a.setState({parameters:a.myParameters})},100)},a.parameterRemoved=function(e){var t=a.myParameters.indexOf(e,0);if(t>-1){var n=a.myParameters.splice(t,1);a.myParameters=n}void 0!==a.removeTimer&&(window.clearTimeout(a.removeTimer),a.removeTimer=void 0),a.removeTimer=window.setTimeout(function(){a.setState({parameters:a.myParameters})},100)},a.state={isConnected:!1,host:window.location.hostname||"localhost",port:1e4,parameters:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"createParameterWidget",value:function(e){return n.createElement(U,{key:e.id,parameter:e,onSubmitCb:this.updateClient})}},{key:"createWidgets",value:function(e){var t=this;return e.map(function(e){return t.createParameterWidget(e)})}},{key:"render",value:function(){var e=this.state.host,t=this.state.port;return n.createElement("section",null,this.createWidgets(this.state.parameters),n.createElement(L.a,{className:"bp3-dark",confirmButtonText:"Connect",icon:"offline",intent:A.a.NONE,isOpen:!0!==this.state.isConnected,onConfirm:this.handleAlertConfirm},n.createElement(G.a,null,n.createElement("strong",null,"Connect to a RabbitControl server")),n.createElement("br",null),n.createElement("br",null),n.createElement(N.a,{style:{alignItems:"center"}},n.createElement(G.a,null,"Host:\xa0"),n.createElement(P.a,{value:e,type:"text",onChange:this.setHost})),n.createElement("br",null),n.createElement(N.a,{style:{alignItems:"center"}},n.createElement(G.a,null,"Port:\xa0"),n.createElement(P.a,{value:t.toFixed(0),min:1024,max:65535,type:"number",onChange:this.setPort})),n.createElement("br",null),n.createElement("div",null,this.state.error?this.state.error:void 0,this.returnSSLInfo())))}},{key:"returnSSLInfo",value:function(){var e=!!document.location&&document.location.toString().startsWith("https"),t=-1!=navigator.userAgent.indexOf("Firefox");return e&&t?n.createElement("div",null,n.createElement("br",null),V,n.createElement("br",null),n.createElement("br",null),"To allow this please set: 'network.websocket.allowInsecureFromHTTPS' in 'about:config' to 'true'."):e?n.createElement("div",null,n.createElement("br",null),V):void 0}},{key:"resetUI",value:function(){this.stopTimers(),this.myParameters=[],this.setState({isConnected:!1,client:void 0,parameters:this.myParameters})}},{key:"stopTimers",value:function(){void 0!==this.addTimer&&(window.clearTimeout(this.addTimer),this.addTimer=void 0),void 0!==this.removeTimer&&(window.clearTimeout(this.removeTimer),this.removeTimer=void 0)}}]),t}(n.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"bp3-dark"},r.a.createElement("div",{className:"App",style:{margin:"30px"}},r.a.createElement(z,null)))}}]),t}(n.Component);_.VERBOSE_LOG=!1;var J=_;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,2,1]]]);
//# sourceMappingURL=main.c1f7c4af.chunk.js.map